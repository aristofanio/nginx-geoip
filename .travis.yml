notifications:
  email: false
services:
- docker
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - DOCKER_REPOSITORY=comaeio/nginx-geoip
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: FGOYT9B2RRubvj898hHmsSsIeFtTKfzlFaj8L9R0jWlQVMI5KAejZnECFY6QkCKhLMEKsd1Eqx8TGnqfVbVE4dEZIq23rZrvU4mf441CyU1EIFV+WpZ6DO/JC2xfhtd5PGp4IZWJR4YAiMujRUuYQoB5eIGN3VzOOH57IdyUffaDoRnC8SDnnrLdQhkTECGUT5WcI1PHAXd8DjNB+lqprs+OBwO0YAeg4dtsp9loO9Hh7va9gUfrBeS8Jh5+EsK74HuWSKNlHvTjOLDk/xP8pDFIaJzPdv9aYj44lz4UBFrWhMutRstyh5dzG6a+Nq9QzxiWpm9a+yv7SuqVlt+HEhwlmnsQ8wPlKnDm6Rvtj38sKq1nkySxaLVoUp7VCwmnSeJB8+HVyNx2lh3Lo3NJgSOI2qnvl985U6LXKhqpsEe32u1ctS1IRpdF7bYDGBS2DbMQwkMhdfyPrsMTJOPHO4AQK37ttz1W2FrfwkNe/8j6JAUDKBBqwD1OMms5bJgMWZ7zmUtdSCoA9BIVttHaw0AdMsgOaJr/q8JT9+6/2fo9npJc4MF1mm6fWqlRRmnBzlmZAHH/zNouoeM0gsS3hhVBV1Gg5EHdVqpU/q1fkuAR6xeEEKLoOra8NKdljrgkCMn3iCyMcPQ9/XqVGhgv2EbI425BRBJWyqzWwaovMjs=
  - secure: Aj+akWwgiVti2w4/zITpovMhJy0dzgzd8/zR54I0QZIqons5xbhTgCisu29hmyvqqZbClcZQNpmJoeAnJeILF1dJ30K0zV5EGzq6enxLWrYjqH4h5q899JC5eL4suRDJTXINDUnXdS0/bmgsptMfBX+VzPrPxOHbJHkL+LwgwGWVg+PaiSSFefj7cVg/gY+l4KDHya01B0Ab0t1GHxoJPlsRZp8+wB2Cc3XBPdfpy/v0M8XjzYMwNxsnG/MoWgqvoJStToUVzgPpCbIs98/C17HNUhauTHjKkVcDPWJilnGgNLzbdoQBcEcUpM261XpEswDBGSOBnCJgQS7JM5rAv5itTaH2iwiZxUwrBw0YfpHIryKjNwrxxi7ki+Run4rotOUQUjR8XeEUZrLWEq1ezByfdt7hiyEa9PztPgOHgLnpKL9bLbW1DhwIS7Vn9rrFcDO7psoEAGcGenX3nk14GGkfv3zVQhePlz9JtWvwvk+kadjA/sTpXE2eDpsrUWzKXri0gRWHuQ+csBTS3/BDwK0uY8JyzxCDtdeRx3/SO/uQ7k3HL8BQJvGCx9NOHOCUjsX2bGJ0EyGjsZBeiInJVjdC/uJKJyk+gqsq4+Kbmwh3VEKWIY5uYay3NPFb794GkwEQsEWI62tN39tN3pR8ubJa3v6Ut9BpAPMrQvWdeds=
  - secure: QqAdZccYpN2aOm5ULMIwyDAUFtrKh+frOPsVpvnQwt+cNW4iSBKa9ZOZWTnkbU0clAGptT8Mk96HnjKnbuWitBM7xGCYz9V8pmSauoboijlcPhgeH69mUM6AeoQeFeJAHjOZC7Pzqf0G2ohQfYzAyNSb+k3fwvLX8krQ0RgWDDjchZhRyBcwl2fnLW/KririA7XrFPqpNibx9uHEgmv/LmzV6c/ftBTaobfZERaG1K2/GCteq6Eqsw04zzAa3gML9GDTKuY/q0eXaH5Nlqef5eskK7WZOT3Q+rEpZvk4uKxB6HsRinsX7laEub2HJ5pOciHQxaZmhxJuiNXCDDWfKtbKKOGq1i3vjXfEjt/O2HrOuVy09baAPrdZc/2WhIWa4DdzKuGEP7d8DIHY2L67V2HEp3nsGjXtirNH6g0488ALlfKC5Q16fANBb7Es06Nc7qW9N0fzjCI14ASy56pj8DCPb1Lrxj1eRHHVI34H82ghoaHbD5AX1POxqewzFQHWYPJndIzBob8divO8jgXzyZU36Elq7S7tBQkYpegD6bLak8EpBCtPNprkbeseFN/2sKgFS3WV7yyKzAoSRi16DSl9gm8fWt1/Z6LUngwTK62fCpn03LIfw51E0vjT0MpfGaIXA8it08WjQe5RfRdLgMGzuZ3P5sjvtmUsfcm7pO8=
after_success:
- echo "Test Success - Branch(\"$TRAVIS_BRANCH\")"
- docker login -u="$DOCKER_USER" -p="$DOCKER_PASS" $DOCKER_REGISTRY
- docker build -f Dockerfile -t $DOCKER_REPOSITORY:$COMMIT .
- docker tag $DOCKER_REPOSITORY:$COMMIT $DOCKER_REGISTRY/$DOCKER_REPOSITORY:latest
- docker push $DOCKER_REGISTRY/$DOCKER_REPOSITORY
